{% extends 'layout.html' %}
{% block content %}

<h2>{{ university.name }}</h2>

<div class="flex">
    <div class="text">{{university.details}}</div>
    <img src='/static/images/Auckland.jpg'>
</div>

<iframe src="https://www.google.com/maps/embed?pb={{university.location}}" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

<div class='university-degrees-container'>
    {% for degree in university.degrees %}
    <div class='grid-item'>

        <div>
            <a href="{{ url_for('degree', id=degree.id )}}">
                <p>{{degree.name}}</p>
                <span class="overlay">
                    {% for university in degree.universities %}
                    {{university.name}}<br>
                    {% endfor %}
                </span>
            </a>
        </div>
        <div>
            <button id="button" class="like_degree" type="submit" data-degree="{{ degree.name }}">
                <p>{{degree.likes}} &#10084;</p>
            </button>
        </div>
    </div> <!-- closing grid-item-->
    </a>

    {% endfor %}
</div> <!-- closing grid-container-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
    document.querySelectorAll('button.like_degree')
        .forEach(element => element.addEventListener(
            'click',
            event => {
                // $.post("like", event.target.dataset.degree).then(response => {
                //     response.
                console.log("liked")
            })
        )
    function func(degree) {
        $.post("like", degree);
        console.log("func");
    }
</script>

{% endblock %}